@page "/"

@inject IGroupService _groupService
@inject IInvitationService _invitationService
@inject INoteService _noteService
@inject NavigationManager NavigationManager;
@inject AuthenticationStateProvider AuthenticationStateProvider
@inject NotificationManager NotificationManager
@using Sep3Blazor.Component
@using LoginComponent
@using Sep3Blazor.Data.GroupData
@using Sep3Blazor.Data.NoteData
@using Sep3Blazor.Data.Notifications
@using Sep3Blazor.Data.Notifications.NotificationModel
@using System.Globalization
@using Microsoft.AspNetCore.Components.Web.Extensions.Head
@using Sep3Blazor.Data.InvitationData


<Title Value="Homepage"></Title>
<Login/>
<AuthorizeView >
    <div class="row d-flex justify-content-between">
        <div class="col-sm-5">
            <GroupListComponent UserID=@context.User.FindFirst("id").Value></GroupListComponent>
        </div>
        <div class="col-sm-5">
            <InvitationsComponent UserID=@context.User.FindFirst("id").Value></InvitationsComponent>
        </div>
    </div>
    <br/>
</AuthorizeView>
<div class="main-title-big" @onclick="ShowNotification">
    Welcome
</div>

@code
{
    protected override async Task OnInitializedAsync()
    {
        base.OnInitialized();
    }

    private async void ShowNotification()
    {
        Notification notification = await _groupService.DeleteGroup(50.ToString());
        await NotificationManager.Show(notification);
    }
}